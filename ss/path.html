<body>
    <div id="map"></div>
    <script src="https://d3js.org/topojson.v1.min.js"></script>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script></script>
    <script type="text/javascript" src="https://d3js.org/d3.v3.min.js"></script>
    
    <script>
    $(document).ready(function () {
    
        var json, map,
        path, vis, xy,
        duration, offset, origin_x, origin_y, len, group, circle;
    
   
        // Draw a GeoJSON line on the map:
    
        map = $('#map');
        xy = d3.geo.mercator().scale(480000).translate([630700, 401100]);
        path = d3.geo.path().projection(xy);
    
        vis = d3.select("#map")
            .append("svg:svg")
            .attr("width", 960)
            .attr("height", 600);
    
        vis.append("svg:g")
            .attr("class", "route")
            .selectAll("path")
            .data(json.features)
            .enter()
            .append("svg:path")
            .attr("d", path)
            .attr("fill-opacity", 0.5)
            .attr("fill", "#fff")
            .attr("stroke", "#333");
    
        // Draw a red circle on the map:
    
        //len = 100; // how do I find the length of the path?
        origin_x = 100;
        origin_y = 100;
    
        group = vis.append("svg:g");
    
        circle = group.append("circle")
            .attr({
            r: 10,
            fill: '#f33',
            transform: function () {
                //var p = path.getPointAtLength(0)
                //return "translate(" + [p.x, p.y] + ")";
                return "translate("+ origin_x +","+ origin_y +")";
            }
        });
    
        // Animate the circle:
    
        duration = 5000;
        circle.transition()
            .duration(duration)
            .ease("linear")
            .attrTween("transform", function (d, i) {
            return function (t) {
                console.log(t);
                //var p = path.node().getPointAtLength(len*t)
                //return "translate("+[p.x,p.y]+")"
                var current_x = origin_x + origin_x * t;
                var current_y = origin_y + origin_y * t;            
                return "translate("+ current_x +","+ current_y +")";
            }
        });
    
    });
    </script>